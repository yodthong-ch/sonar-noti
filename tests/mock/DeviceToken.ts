import DeviceTokenInterface from "../../src/repositories/interfaces/DeviceTokenInterface"
import { DeviceType } from "../../src/config/appid"
import {Token as TokenItem} from "../../src/items"

export const sampleData:TokenItem[] = [
    {
      "id": "5ed9f1ecfc033202ea73f3bc",
      "token": "8a27c531-8e86-4b32-98a7-69b7bbffd6b2",
      "appId": "com.dekd.school",
      "activate": false,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ec8618094290ca1e4f",
      "token": "d48321c4-ab1e-4112-b894-5b92f65d7439",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "firebase:android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec7799133715d8bc7e",
      "token": "bcb85644-f397-421e-9220-263ed7c419eb",
      "appId": "com.dekd.school",
      "activate": false,
      "deviceType": "firebase:android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec8b4481256c6d9d17",
      "token": "6806a018-998f-46e2-9c79-bc5c0750ffe8",
      "appId": "com.dekd.apps",
      "activate": true,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec176915d57fba6544",
      "token": "975dd30d-e79b-430f-9eba-af3b52d32092",
      "appId": "com.dekd.apps.admission",
      "activate": true,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec0c50db925010fea4",
      "token": "ac3eec01-413b-4db7-a57e-0602b5022734",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec08462e79feb12889",
      "token": "c4ac96a2-5442-454f-a0e4-38bf9dcbf0f2",
      "appId": "com.dekd.apps",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec74c3b5fdfc6774de",
      "token": "55085a5d-778c-4e8e-8f7a-d687f9a2b9c3",
      "appId": "com.dekd.apps",
      "activate": false,
      "deviceType": "firebase:android",
      "userId": 0
    },
    {
      "id": "5ed9f1eccc224f0b40c7bf98",
      "token": "99f433fa-9f05-4fac-a7aa-2d7075abcf14",
      "appId": "com.dekd.apps",
      "activate": true,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec4ed8b05ef3384ab7",
      "token": "3e626597-e2f7-4c05-98ad-9d224781a676",
      "appId": "com.dekd.school",
      "activate": true,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec8d38061ac9ce0bcd",
      "token": "5b74ce92-a19c-4891-9313-9e6665242bc2",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec31b3b5de8324752f",
      "token": "9974b28c-ab40-45fc-873c-b380d1a92aef",
      "appId": "com.dekd.school",
      "activate": true,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec8a1d4c1a5e7b71c8",
      "token": "fdce5627-e856-4029-8de0-6f951646a066",
      "appId": "com.dekd.apps.admission",
      "activate": true,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec0e0325987ef87427",
      "token": "48bb5771-f89d-4f9f-8552-94e1ee1d6398",
      "appId": "com.dekd.apps",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec0c77e2f4f8c8f2d1",
      "token": "670a6101-7e8a-4980-ae94-1b0b03decad1",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec5773441c604c1ce2",
      "token": "e20204f6-c269-449f-8e9d-448e0a9361a5",
      "appId": "com.dekd.school",
      "activate": true,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ec70efee3e4e497199",
      "token": "43621c82-9f5d-4375-93d9-747bb0ea3db2",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ec5604f2226dcd707b",
      "token": "424fe4c9-7171-4261-8181-9cd8bdecb522",
      "appId": "com.dekd.school",
      "activate": true,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ec0611041d483e2242",
      "token": "e8826725-f62c-4490-991b-321974559e99",
      "appId": "com.dekd.apps",
      "activate": true,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec51a9b9b59c106c31",
      "token": "37c8d4ea-d460-4ca1-ad55-3e3be345b4a7",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "firebase:ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ecc76448278fac87f1",
      "token": "86686bd7-2fae-4506-b459-6a4a7e982d8c",
      "appId": "com.dekd.school",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec86a4a2368849c2b7",
      "token": "729a6281-5dc1-4865-8bf2-f9107959ad2d",
      "appId": "com.dekd.apps",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec6d4ea54c0717bd39",
      "token": "2d5c668d-3b81-40a7-a666-c2d061fb6d1b",
      "appId": "com.dekd.apps",
      "activate": true,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ece9f19fa80d3c8930",
      "token": "cb03d45d-2473-4c1c-a0d8-d755566cb545",
      "appId": "com.dekd.school",
      "activate": false,
      "deviceType": "firebase:ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ecc836170d97d768bb",
      "token": "2c714e01-cc62-4294-9c19-8ce147062bd2",
      "appId": "com.dekd.school",
      "activate": true,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ecd2a670ed4c28a4b0",
      "token": "e0acd192-77a3-4e38-842b-9fb1cd1609d9",
      "appId": "com.dekd.school",
      "activate": false,
      "deviceType": "firebase",
      "userId": 0
    },
    {
      "id": "5ed9f1ec28f9df4dca4eef9c",
      "token": "1c46dc34-aa3f-4ca9-bde1-74fc19fc5f98",
      "appId": "com.dekd.apps.admission",
      "activate": true,
      "deviceType": "android",
      "userId": 0
    },
    {
      "id": "5ed9f1eccdf84f7e95f8e1cf",
      "token": "1da65cfb-8b82-455b-baf2-af472f9820db",
      "appId": "com.dekd.apps.admission",
      "activate": false,
      "deviceType": "ios",
      "userId": 0
    },
    {
      "id": "5ed9f1ec2bcb853c460206fb",
      "token": "105f36b7-6ac7-4701-a84b-3a31805d1b48",
      "appId": "com.dekd.apps",
      "activate": true,
      "deviceType": "firebase:android",
      "userId": 0
    },
    {
      "id": "5ed9f1ec9305057ff5a51a40",
      "token": "7dbe7e41-8a4b-46d8-80a0-f5bd1271fb03",
      "appId": "com.dekd.apps.admission",
      "activate": true,
      "deviceType": "firebase:ios",
      "userId": 0
    }
  ]

export class MockDeviceToken implements DeviceTokenInterface
{
    public appId: string = ''
    public data:{[x: string]: any} = {}
    public deviceType?: string
    public userIds?: number[]

    async register(appVersion: string, deviceType: DeviceType, deviceToken: string, userId?: number | undefined): Promise<boolean> {
        this.data = {
            appVersion,
            deviceType,
            deviceToken,
            userId,
        }

        return true
    }

    private filter() {
        return sampleData.filter( item => {
            if (item.appId !== this.appId) return false
            if (this.deviceType && this.deviceType !== item.deviceType) return false
            if (this.userIds && item.userId && this.userIds.indexOf(item.userId) < 0) return false

            return item.activate
        })
    }

    async count(): Promise<number> {
        return this.filter().length
    }
    async execute(): Promise<TokenItem[]> {
        return this.filter()
    }
    async chunk(offset: number, limit: number): Promise<TokenItem[]> {
        return this.filter().slice(offset, offset + limit)
    }
    setAppId(value: string): DeviceTokenInterface {
        this.appId = value
        return this
    }
    setDeviceType(value: string): DeviceTokenInterface {
        this.deviceType = value

        return this
    }
    setUserIds(userIds: number[]): DeviceTokenInterface {
        this.userIds = userIds
        return this
    }
    clearUserIds(): DeviceTokenInterface {
        this.userIds = []

        return this
    }
    
}